<p class="text-left">This will be very short post. I haven't use this command before and nowadays I was reading something about git where this command was used. I do not consider myself as an expert in git. There are still many features I am not using or I don't know about. So I googled it...</p>
<h2 class="theme-subheading" id="commit-that-introduced-a-bug">Commit that introduced a bug</h2>
<p class="text-left">The first result on google is the git docs page, where you can read :</p>
<blockquote class="blockquote">
  <p>git-bisect - Use binary search to find the commit that introduced a bug</p>
  <footer><a href="https://git-scm.com/docs/git-bisect">git</a></footer>
</blockquote>
<p class="text-left">What does this mean? I use simple example but it can be extended and used to search any change in the source code ( not only bugs ). So to demonstrate it, I create a bash script and commit after each line.</p>
<h4 class="theme-subheading" id="initialize-git-repo">Initialize git repo</h4>
<pre class="prettyprint">
cd ~/Documents
mkdir bisecttest
cd bisecttest

touch script.sh
chmod +x script.sh

git init
git add .
git commit -m "initial commit"
</pre>
<h4 class="theme-subheading" id="good-and-working-part">Good and working part</h4>
<pre class="prettyprint">
#!/bin/bash
echo "1 : ok"
</pre>
<p class="text-left">And commit. ( <kbd>git add . && git commit -m "number 1 commit"</kbd> ). Append new line <code>echo "2 : ok"</code> and commit again.</p>
<h4 class="theme-subheading" id="bad-and-not-working-part">Bad and not working part</h4>
<p class="text-left">Now, create the error ( buggy ) part. In the script it means exit with an error code number. E.g.:</p>
<pre class="prettyprint">
exit 1
</pre>
<p class="text-left">In real world you know this would screw up the whole thing, but now you are happy to commit new line ( <kbd>git add . && git commit -m "error commit"</kbd> ).</p>
<h4 class="theme-subheading" id="again-some-good-part">Again some good part</h4>
<p class="text-left"></p>
<pre class="prettyprint">
echo "3 : ok" # + commit
echo "4 : ok" # + commit
echo "5 : ok" # + commit
</pre>
<h4 class="theme-subheading" id="now-you-realize-something-is-wrong">Now you realize something is wrong</h4>
<p class="text-left">You run the script, it should write numbers from 1 to 5 on the output, but stops on the number 2. Why? Where did I ( or whoever ) make a mistake? You can try and search in code or use <kbd>git bisect</kbd>!</p>
<p class="text-left">You know it was working 5 - 6 commits ago and now it is not ( this is very important ). You run command :</p>
<pre class="prettyprint">
git bisect start
</pre>
<p class="text-left">Mark current version as bad :</p>
<pre class="prettyprint">
git bisect bad
</pre>
<p class="text-left">Checkout working commit / tag and mark it as good ( 5 commits ago is <code>number 1 commit</code> ) :</p>
<pre class="prettyprint">
git checkout HEAD~5

git bisect good
</pre>
<p class="text-left">Now, git knows which version is bad, where in history it was good and begin to search. How? It automatically ( after you enter one bad and one good commit ) checkouts a commit in the middle of that range of history. You run the script and see if it is good or bad.</p>
<p class="text-left"><i>This is easy, but remember, it can be whatever. If it is a webpage, reload it and check if the bug is still there. If it is an Android app, compile it, install and try it.</i></p>
<p class="text-left">As I mentioned, it jumps in the middle of the commit history, so you should be on <code>error commit</code>, which is bad.</p>
<pre class="prettyprint">
git bisect bad
</pre>
<p class="text-left">After you typed that command, git jumped in the middle of this commit and the first good commit. Therefore the position is on <code>number 2 commit</code>. In that commit there are only two <code>echo</code> commands which means it is a good one.</p>
<pre class="prettyprint">
git bisect good
</pre>
<p class="text-left">Now, it is obvious that the error occurred in <code>error commit</code>. Git shows message like this :</p>
<pre class="prettyprint">
75a02e61b9ba3eef2b11fb851d7e27b0629f8210 is the first bad commit
commit 75a02e61b9ba3eef2b11fb851d7e27b0629f8210
Author: Matej Jellus &lt;juffalow@juffalow.com&gt;
Date:   Thu May 12 23:20:45 2016 +0200

    error commit

:100755 100755 ec12ba63a1d344f36b8672c3ea0f05f4888b503d 6e6ed8c4fdd3066dc3e103d78992ca0626a878c6 M	script.sh
</pre>
<p class="text-left">..and the search is over. If you are curious what exactly it was type <kbd>git show &lt;commit hash&gt;</kbd></p>
<pre class="prettyprint">
commit 75a02e61b9ba3eef2b11fb851d7e27b0629f8210
Author: Matej Jellus &lt;juffalow@juffalow.com&gt;
Date:   Thu May 12 23:20:45 2016 +0200

    error commit

diff --git a/script.sh b/script.sh
index ec12ba6..6e6ed8c 100755
--- a/script.sh
+++ b/script.sh
@@ -1,4 +1,5 @@
 #!/bin/bash
 echo "1 : ok"
 echo "2 : ok"
+exit 1
</pre>
<p class="text-left">To return back to original HEAD type <kbd>git bisect reset</kbd>.</p>
<h4 class="theme-subheading" id="automatically-test-and-find-bad-commit">Automatically test and find bad commit</h4>
<p class="text-left">If you are able to write a test for your search you can speed this operations up. This example servers as a test at the same time.</p>
<pre class="prettyprint">
git bisect start
# mark current commit as bad
git bisect bad
# go to history and checkout commit that is good
git checkout HEAD~5
# mark it as good
git bisect good
# and now let the git test it for you...
git bisect run ./script.sh
</pre>
<h2 class="theme-subheading" id="conclusion">Conclusion</h2>
<p class="text-left"></p>
